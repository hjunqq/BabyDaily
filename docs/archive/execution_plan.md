# BabyDaily 执行规划（取代 Gemini 产出）

## 目标
- 落地移动端 Home（关键总览 + 最近记录 + 主操作 + 空/加载态）。
- 重做 Web Dashboard（信息层次、对比度、KPI/图表/表格的可用性）。
- 建立主题化组件体系（A 微调稿 / B 半扁平稿），满足 WCAG AA。
- 打通前后端：记录列表与统计、OOTD 列表/标签/上传。

## 现状
- 前端：Dashboard/OOTD 静态稿，主题切换但仅视觉；中文有乱码；无真实数据对接。
- 后端：Nest 模块骨架，记录/宝宝基础 CRUD；无统计/分页/过滤/上传；缺少 DTO 校验与权限细化。
- 文档：有 `prototype_blueprints.md` 设计蓝图与验收清单。

## 差距
- 移动端 Home 未实现；Web Dashboard 未按蓝图重构（信息层级、对比度、趋势图、表格态）。
- 组件体系未抽象：按钮/卡片/空态/骨架/导航状态未统一，主题 A/B 未落地到 token。
- 数据未接；接口缺统计、分页、OOTD 标签/上传；无 i18n、无可访问性校验。

## 工作包
1) 设计与主题
- 提炼设计 token：色板、圆角、阴影、间距；主题 A（可爱微调）、B（半扁平）。
- 组件状态板：默认/悬停/按压/禁用/加载/空态/错误；图标规范（aria-label/tooltip）。

2) 前端（Web）
- 重构 Dashboard：
  - 背景用浅米/浅灰，减少光晕；KPI 卡基线对齐，文字加粗。
  - 趋势图加坐标/网格/单位，双配色（奶量/辅食）。
  - 表格：表头分隔、行高≥44px、操作列按钮或菜单 + Tooltip。
- 移动端 Home 页面：
  - 顶部头像卡 + 今日三指标小卡；最近 3–5 条记录 + “查看全部”。
  - 唯一主按钮“+ 记录”；空态/加载骨架。
- 组件抽象：Button/Card/KPICard/ChartCard/Table/EmptyState/Skeleton/FAB/Nav。
- 修复中文乱码（确保 UTF-8 文案与数据）。

3) 前端（OOTD）
- 接入真实数据；标签筛选；点赞/上传入口（可占位）。
- 网格卡按设计调整圆角/阴影/对比度。

4) 后端
- 记录接口：分页/limit/sort；按宝宝过滤；返回创建者昵称；健壮校验。
- 统计接口：/records/baby/:id/summary?days=7 -> 今日奶量/尿布/睡眠，总览 + 7 天喂养趋势。
- OOTD：列表/过滤/上传接口，返回缩略图、标签、likes。
- 权限：家庭成员可访问；DTO 校验；错误码友好。

5) 集成与质量
- 前后端对接：类型定义、API hooks；loading/empty/error 态。
- 可访问性：对比度 AA、触控区≥44px、焦点态；i18n 准备（中英）。
- 验收：对照 `prototype_blueprints.md` 验收清单自测。

## 近期优先级（按顺序）
1) 前端：添加设计 token 与主题 A/B；修复中文乱码。
2) 前端：重构 Web Dashboard 布局与样式（KPI/图表/表格），实现空态/加载态组件。
3) 前端：新增移动端 Home 页（关键总览 + 列表 + FAB）。
4) 后端：补统计接口 + 记录分页；提供 mock JSON 以便前端先接。
5) 集成：Dashboard/Home 接口对接，loading/empty/error 验收。

## 我方下一步（可直接执行）
- 在前端创建 design tokens（颜色/阴影/圆角）与主题枚举，统一组件样式。
- 重做 Dashboard 结构（背景、KPI 卡、图表、表格）并修正文案编码。
- 搭建移动端 Home 页面骨架，接假数据占位，预留 API hooks。
- 草拟后端统计接口契约（路径、入参、返回结构）供实现。
